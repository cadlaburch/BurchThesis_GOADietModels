#This is my first look at the food habits data
#edit
#load some libraries
library(readr)
library(tidyverse)
library(sf)
library(here)
#load in the raw data
raw_prey_length <- read_csv("data/GOA_Raw_PreyLength.csv")
raw_stomach_contents <- read_csv("data/GOA_Raw_StomachContents.csv")
#Load Libraries
library(here)
library(tidyverse)
library(here)
#load in the raw data
raw_prey_length <- read_csv("data/GOA_Raw_PreyLength.csv")
#load in the raw data
raw_prey_length <- read_csv(here("data/GOA_Raw_PreyLength.csv"))
raw_stomach_contents <- read_csv(here("data/GOA_Raw_StomachContents.csv"))
#don't know if I need the race data but I found it...
RaceData2015_2019 <- read_csv(here("data/RaceDatagoa2015_2019.csv"))
#This is my first look at the food habits data
#edit
#load some libraries
library(readr)
library(tidyverse)
library(sf)
library(here)
#load libaries
library(readr)
library(tidyverse)
library(here)
#load data
raw_stomach_contents <- read_csv(here("data/GOA_Raw_StomachContents.csv"))
sc_1999 <- raw_stomach_contents %>%
filter(Year == 1999)
sc_2001 <- raw_stomach_contents %>%
filter(Year == 1999)
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
View(E_1999)
library(taxize)
#Converting scientific names to common names
sci2comm(E_1999$Pred_name, simplify = T)
#Converting scientific names to common names
sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
#Converting scientific names to common names
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
View(names)
names<- as.data.frame(names)
View(names)
names<- pivot_longer(as.data.frame(names))
#Converting scientific names to common names
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
View(names)
names1<- as.data.frame(names, col.names = c("Sci", "nonSci"))
View(names1)
names1<- as.data.frame(names)
names1<-names1 %>%
pivot_longer(names_to = "sci", values_to = "nonsci")
names[["Anoplopoma fimbria"]]
?pivot_longer
names1<-names1 %>%
pivot_longer(cols = everything(),names_to = "sci", values_to = "nonsci")
View(names1)
#Converting scientific names to common names
sc_names <- sci2comm(raw_stomach_contents$Pred_name, simplify = T)
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
names<- as.data.frame(names)
names<-names %>%
pivot_longer(cols = everything(),names_to = "sci", values_to = "nonsci")
View(names)
names<- as.data.frame(names)%>%
pivot_longer(cols = everything(),names_to = "sci", values_to = "nonsci")
names<- as.data.frame(names)
names <- names%>%
pivot_longer(cols = everything(),names_to = "sci", values_to = "nonsci")
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
names <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
names<- as.data.frame(names)
names <- names%>%
pivot_longer(cols = everything(),names_to = "sci", values_to = "nonsci")
names <- names%>%
pivot_longer(cols = everything(),names_to = "Pred_name", values_to = "nonsci")
View(names)
scinames <- sci2comm(E_1999$Pred_name, simplify = T, quiet = T)
names<- as.data.frame(scinames)
names <- names %>%
pivot_longer(cols = everything(),names_to = "Pred_name", values_to = "nonsci")
View(names)
sc_1999_names <- full_join(names, sc_1999, by = "Pred_name")
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(nonsci) %>%
summarise(E = n())
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
1999_names <- full_join(names, E_1999, by = "Pred_name")
names_1999 <- full_join(names, E_1999, by = "Pred_name")
View(names_1999)
names_1999 <- left_join(names, E_1999)
scinames <- as.data.frame(sci2comm(E_1999$Pred_name, simplify = T, quiet = T))
View(scinames)
list(sci2comm(E1999$Pred_name, simplify = T))
list(sci2comm(E_1999$Pred_name, simplify = T))
list<-(sci2comm(E_1999$Pred_name, simplify = T))
?rbind
dataframe <- do.call(cbind, list)
View(dataframe)
dataframe <- do.call(rbind, list)
dataframe <- do.call(rbind, list, colnames = c("y", "n"))
dataframe <- do.call(rbind, list, colnames("y", "n"))
dataframe <- do.call(rbind, list)
colnames(dataframe) <- c(x, y)
colnames(dataframe) <- c("x", "y")
colnames(as.data.frame(dataframe)) <- c("x", "y")
dataframe <- as.data.frame(do.call(rbind, list))
View(dataframe)
class(dataframe)
names(data.frame)
names(dataframe)
dataframe <- rownames_to_column(as.data.frame(do.call(rbind, list)))
View(dataframe)
colnames(as.data.frame(dataframe)) <- c("Pred_name", "Com_nam")
colnames(dataframe) <- c("Pred_name", "Com_nam")
names <- rownames_to_column(as.data.frame(do.call(rbind, list)))
colnames(names) <- c("Pred_name", "Com_nam")
names_1999 <- full_join(names, E_1999, by = "Pred_name")
View(names_1999)
F <- raw_stomach_contents %>%
filter(Year == 2003, Pred_stomwt != 0) %>%
group_by(Pred_name) %>%
mutate(F = n())
F_1999 <- sc_1999 %>%
filter(Pred_stomwt != 0) %>%
group_by(Pred_name) %>%
mutate(F = n())
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
mutate(E = n())
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
F_1999 <- sc_1999 %>%
filter(Pred_stomwt != 0) %>%
group_by(Pred_name) %>%
summarize(F = n())
F_1999 <- sc_1999 %>%
filter(Pred_stomwt != 0) %>%
group_by(Pred_name) %>%
summarise(F = n())
T_1999 <- sc_1999 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"Fork length (cm)* Mean" = mean(Pred_len),
"+- SD" = sd(Pred_len))
EF_1999 <- full_join(E_1999, F_1999, by = "Pred_name")
EFT_1999 <- full_join(EF_1999, T_1999, by = "Pred_name")
View(EFT_1999)
Table1_1999 <- full_join(names, EFT_1999, by = "Pred_name")
View(Table1_1999)
#Finding Scientific Names
list<-(sci2comm(EFT_1999$Pred_name, simplify = T))
names <- rownames_to_column(as.data.frame(do.call(rbind, list)))
colnames(names) <- c("Pred_name", "Com_nam")
#Adding common names to final table
Table1_1999 <- full_join(names, EFT_1999, by = "Pred_name")
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(EF_1999, T_1999, by = "Pred_name")
#Adding common names to final table
Table1_1999 <- full_join(names, FET_1999, by = "Pred_name")
View(Table1_1999)
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
#Adding common names to final table
Table1_1999 <- full_join(names, FET_1999, by = "Pred_name")
unique(sc_1999$Pred_stomwt)
