group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
View(T_1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
#Adding common names to final table
Table1_1999 <- full_join(names, FET_1999, by = "Pred_name")
#Total stomachs, mean length and stdv
T_2001 <- sc_2001 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2001)
#Combining into one table
FE_2001 <- full_join(F_2001, E_2001, by = "Pred_name")
FET_2001 <- full_join(FE_2001, T_2001, by = "Pred_name")
#Adding common names to final table
Table2_2001 <- full_join(names, FET_2001, by = "Pred_name")
View(sc_2001)
#These are the years not included in Yang et al: 2003 2005 2007 2009 2011 2013 2015 2017 2019
E_2003 <- sc_2003 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#2003
sc_2003 <- raw_stomach_contents %>%
filter(Year==2003)
#Calculating Summary Stats
#Empty stomachs
E_2003 <- sc_2003 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Full stomachs
F_2003 <- sc_2003 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name) %>%
summarise(F = n())
#Total stomachs, mean length and stdv
T_2003 <- sc_2003 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2003)
#Combining into one table
FE_2003 <- full_join(F_2003, E_2003, by = "Pred_name")
FET_2003 <- full_join(FE_2003, T_2003, by = "Pred_name")
#Finding Scientific Names
#WARNING: this is slow to run
list<-(sci2comm(FET_2003$Pred_name, simplify = T))
#Finding Scientific Names
#WARNING: this is slow to run
list<-(sci2comm(FET_2003$Pred_name, simplify = T))
names <- rownames_to_column(as.data.frame(do.call(rbind, list)))
colnames(names) <- c("Pred_name", "Com_nam")
#These are the years not included in Yang et al: 2003 2005 2007 2009 2011 2013 2015 2017 2019
E_2003 <- sc_2003 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Full stomachs
F_2001 <- sc_2001 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name) %>%
summarise(F = n())
#Total stomachs, mean length and stdv
T_2001 <- sc_2001 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2001)
#creating object with scientific names
pred_names <- raw_stomach_contents %>%
select(unique(Pred_name))
View(raw_stomach_contents)
#creating object with scientific names
pred_names <- raw_stomach_contents %>%
select(Pred_name)
View(pred_names)
#creating object with scientific names
pred_names <- raw_stomach_contents %>%
distinct(Pred_name)
prey_names <- raw_stomach_contents %>%
distinct(Prey_name)
prey_names <- raw_stomach_contents %>%
distinct(Prey_Name)
#creating object with scientific names
pred_names <- raw_stomach_contents %>%
distinct(Pred_name, Prey_Name)
#creating object with scientific names
pred_names <- raw_stomach_contents %>%
distinct(Pred_name)
list<-(sci2comm(pred_names, simplify = T))
pred_list<-(sci2comm(pred_names, simplify = T))
names_df <- rownames_to_column(as.data.frame(do.call(rbind, list)))
colnames(names_df) <- c("Pred_name", "Com_name")
pred_names_df <- rownames_to_column(as.data.frame(do.call(rbind, list)))
colnames(names_df) <- c("Pred_name", "Com_name")
colnames(pred_names_df) <- c("Pred_name", "Com_name")
View(pred_names_df)
View(pred_names)
#creating object with scientific names
#Predators
pred_names <- raw_stomach_contents %>%
distinct(Pred_name)
?sci2comm
pred_list<-(sci2comm(pred_names$Pred_name, simplify = F, db = "itis"))
pred_names_df <- rownames_to_column(as.data.frame(do.call(rbind, list)))
View(pred_names_df)
pred_names_df <- rownames_to_column(as.data.frame(do.call(rbind, pred_list)))
View(pred_names)
View(pred_list)
pred_list<-(sci2comm(pred_names$Pred_name, simplify = T, db = "itis"))
pred_names_df <- rownames_to_column(as.data.frame(do.call(rbind, pred_list)))
colnames(pred_names_df) <- c("Pred_name", "Com_name")
View(pred_names_df)
pred_list<-(sci2comm(pred_names$Pred_name, simplify = T, db = "ncbi"))
pred_names_df <- rownames_to_column(as.data.frame(do.call(rbind, pred_list)))
colnames(pred_names_df) <- c("Pred_name", "Com_name")
View(pred_names)
list<-sci2comm(prey_names$Pred_Name, simplify = T, db = "ncbi")
list<-sci2comm(prey_names$Prey_Name, simplify = T, db = "ncbi")
View(prey_names)
View(prey_names)
#merging common names with overall dataframe
stomach_contents <- full_join(raw_stomach_contents, pred_names_df, by = "Pred_name")
View(stomach_contents)
#Filter for year 1999 and 2001
sc_1999 <- stomach_contents %>%
filter(Year == 1999)
sc_2001 <- stomach_contents %>%
filter(Year == 2001)
#Filter for year
sc_1999 <- stomach_contents %>%
filter(Year == 1999)
#Calculating Summary Stats
#Empty stomachs
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Full stomachs
F_1999 <- sc_1999 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name) %>%
summarise(F = n())
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len), "Com_name" = Com_name) %>%
mutate(year = 1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
#Adding common names to final table
Table1_1999 <- full_join(names, FET_1999, by = "Pred_name")
Table1_1999
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Com_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Com_name")
View(T_1999)
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Pred_name, Com_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
#Adding common names to final table
Table1_1999 <- full_join(names, FET_1999, by = "Pred_name")
Table1_1999
View(Table1_1999)
colnames(names) <- c("Pred_name", "Com_name")
#Calculating Summary Stats
#Empty stomachs
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
View(E_1999)
#Full stomachs
F_1999 <- sc_1999 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name) %>%
summarise(F = n())
View(F_1999)
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Pred_name, Com_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
View(T_1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
View(FET_1999)
#Calculating Summary Stats
#Empty stomachs
E_1999 <- sc_1999 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Full stomachs
F_1999 <- sc_1999 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Total stomachs, mean length and stdv
T_1999 <- sc_1999 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 1999)
#Combining into one table
FE_1999 <- full_join(F_1999, E_1999, by = "Pred_name")
FET_1999 <- full_join(FE_1999, T_1999, by = "Pred_name")
#Filter for year
sc_2001 <- stomach_contents %>%
filter(Year == 2001)
#Calculating Summary Sample Sizes
#Full stomachs
F_2001 <- sc_2001 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2001 <- sc_2001 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2001 <- sc_2001 %>%
group_by(Pred_name) %>%
summarise(T = n(), "max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2001)
#Combining into one table
FE_2001 <- full_join(F_2001, E_2001, by = "Pred_name")
FET_2001 <- full_join(FE_2001, T_2001, by = "Pred_name")
View(FET_2001)
############YEAR 2003
#Filter for year
sc_2003 <- stomach_contents %>%
filter(Year == 2003)
#Calculating Summary Sample Sizes
#Full stomachs
F_2003 <- sc_2003 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2003 <- sc_2003 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2003 <- sc_2003 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2003)
#Combining into one table
FE_2003 <- full_join(F_2003, E_2003, by = "Pred_name")
FET_2003 <- full_join(FE_2003, T_2003, by = "Pred_name")
############YEAR 2005
#Filter for year
sc_2005 <- stomach_contents %>%
filter(Year == 2005)
#Calculating Summary Sample Sizes
#Full stomachs
F_2005 <- sc_2005 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2005 <- sc_2005 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2005 <- sc_2005 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2005)
#Combining into one table
FE_2005 <- full_join(F_2005, E_2005, by = "Pred_name")
FET_2005 <- full_join(FE_2005, T_2005, by = "Pred_name")
############YEAR 2007
#Filter for year
sc_2007 <- stomach_contents %>%
filter(Year == 2007)
#Calculating Summary Sample Sizes
#Full stomachs
F_2007 <- sc_2007 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2007 <- sc_2007 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2007 <- sc_2007 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2007)
#Combining into one table
FE_2007 <- full_join(F_2007, E_2007, by = "Pred_name")
FET_2007 <- full_join(FE_2007, T_2007, by = "Pred_name")
############YEAR 2009
#Filter for year
sc_2009 <- stomach_contents %>%
filter(Year == 2009)
#Calculating Summary Sample Sizes
#Full stomachs
F_2009 <- sc_2009 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2009 <- sc_2009 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2009 <- sc_2009 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2009)
#Combining into one table
FE_2009 <- full_join(F_2009, E_2009, by = "Pred_name")
FET_2009 <- full_join(FE_2009, T_2009, by = "Pred_name")
############YEAR 2011
#Filter for year
sc_2011 <- stomach_contents %>%
filter(Year == 2011)
#Calculating Summary Sample Sizes
#Full stomachs
F_2011 <- sc_2011 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2011 <- sc_2011 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2011 <- sc_2011 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2011)
#Combining into one table
FE_2011 <- full_join(F_2011, E_2011, by = "Pred_name")
FET_2011 <- full_join(FE_2011, T_2011, by = "Pred_name")
############YEAR 2013
#Filter for year
sc_2013 <- stomach_contents %>%
filter(Year == 2013)
#Calculating Summary Sample Sizes
#Full stomachs
F_2013 <- sc_2013 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2013 <- sc_2013 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2013 <- sc_2013 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2013)
#Combining into one table
FE_2013 <- full_join(F_2013, E_2013, by = "Pred_name")
FET_2013 <- full_join(FE_2013, T_2013, by = "Pred_name")
############YEAR 2015
#Filter for year
sc_2015 <- stomach_contents %>%
filter(Year == 2015)
#Calculating Summary Sample Sizes
#Full stomachs
F_2015 <- sc_2015 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2015 <- sc_2015 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2015 <- sc_2015 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2015)
#Combining into one table
FE_2015 <- full_join(F_2015, E_2015, by = "Pred_name")
FET_2015 <- full_join(FE_2015, T_2015, by = "Pred_name")
############YEAR 2017
#Filter for year
sc_2017 <- stomach_contents %>%
filter(Year == 2017)
#Calculating Summary Sample Sizes
#Full stomachs
F_2017 <- sc_2017 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2017 <- sc_2017 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2017 <- sc_2017 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2017)
#Combining into one table
FE_2017 <- full_join(F_2017, E_2017, by = "Pred_name")
FET_2017 <- full_join(FE_2017, T_2017, by = "Pred_name")
############YEAR 2019
#Filter for year
sc_2019 <- stomach_contents %>%
filter(Year == 2019)
#Calculating Summary Sample Sizes
#Full stomachs
F_2019 <- sc_2019 %>%
filter(Pred_stomwt>0) %>%
group_by(Pred_name, Com_name) %>%
summarise(F = n())
#Empty stomachs
E_2019 <- sc_2019 %>%
filter(Pred_stomwt == 0) %>%
group_by(Pred_name) %>%
summarise(E = n())
#Total stomachs, mean length and stdv
T_2019 <- sc_2019 %>%
group_by(Pred_name) %>%
summarise(T = n(),
"max" = max(Pred_len), "min" = min(Pred_len),
"Fork length (cm)* Mean" = mean(Pred_len),
"SD" = sd(Pred_len)) %>%
mutate(year = 2019)
#Combining into one table
FE_2019 <- full_join(F_2019, E_2019, by = "Pred_name")
FET_2019 <- full_join(FE_2019, T_2019, by = "Pred_name")
joined_summary <- merge(FET_1999, FET_2001)
View(joined_summary)
joined_summary <- rbind(FET_1999, FET_2001)
joined_summary <- rbind(FET_1999, FET_2001, FET_2003, FET_2005, FET_2007, FET_2009, FET_2011, FET_2013, FET_2015, FET_2017, FET_2019)
View(FET_2019)
#export csv
write.csv(joined_summary, file = here("output/PredSampledSummaryInfo"))
#export csv
write.csv(joined_summary, file = here("output/PredSampledSummaryInfo.csv"))
