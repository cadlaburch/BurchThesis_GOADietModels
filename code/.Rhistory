filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
F_poll_i <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>%
group_by(Prey_Name) %>%
summarise(F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%F" = (F/540)*100, year = 2001)
#merge dataframes
poll_i <- full_join(WN_poll_i, F_poll_i, by = "Prey_Name")
}
{
WN_poll_(i) <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
F_poll_(i) <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>%
group_by(Prey_Name) %>%
summarise(F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%F" = (F/540)*100, year = 2001)
#merge dataframes
poll_(i) <- full_join(WN_poll_i, F_poll_i, by = "Prey_Name")
}
{
i <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
pollock <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
View(i)
for (i in c(1999, 2001))
{
pollock <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
print(pollock$TotalWt)
View(pollock)
temp<- list()
temp[[i]] <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
for (i in c(1999, 2001, 2003))
for (i in c(1999, 2001, 2003))
{
temp[[i]] <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
View(temp)
summary <- raw_stomach_contents %>%
filter(Year == n, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
for (i in c(1999, 2001, 2003))
{
temp[[i]] <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
temp
temp<- data_frame()
temp<- tibble()
temp<- tibble()
for (i in c(1999, 2001, 2003))
{
temp[[i]] <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
for (i in c(1999, 2001, 2003))
{
temp[[i]] <- raw_stomach_contents %>%
filter(Year == i, Pred_nodc == 8791030701) %>% #filter for year and Walleye Pollock
group_by(Prey_Name) %>%  #group by prey
mutate(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
percent_weight <- function(data, group){
data %>%
group_by(group) %>%
mutate("%W" = Prey_twt+1)
}
test<- raw_stomach_contents %>%
percent_weight(raw_stomach_contents, Prey_Name)
test<- raw_stomach_contents %>%
percent_weight(Prey_Name)
data %>%
group_by(Prey_name) %>%
mutate("%W" = Prey_twt+1)
percent_weight <- function(data, group){
data %>%
group_by(Prey_name) %>%
mutate("%W" = Prey_twt+1)
}
test<- raw_stomach_contents %>%
percent_weight(Prey_Name)
pollock <- raw_stomach_contents %>%
filter(Pred_nodc == 8791030701)
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019)){
pollock[[i]] <- pollock %>%
filter(Year == [i]) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019)){
pollock[[i]] <- pollock %>%
filter(Year == [i]) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019)){
pollock[[i]] <- pollock %>%
filter(Year == [i]) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollock[[i]] <- pollock %>%
filter(Year == [i]) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock[[i]] <- pollock %>%
filter(Year == [i]) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollock[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
pollock <- tibble()
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollock[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollock[[i]] <- pollock %>%
filter(year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
pollocks <- tibble()
pollock <- raw_stomach_contents %>%
filter(Pred_nodc == 8791030701)
pollocks <- tibble()
{
pollocks[[i]] <- pollock %>%
filter(year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollocks[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
mutate(TotalWt = sum(Prey_twt), N = n())
}
{
pollocks[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
summarize(TotalWt = sum(Prey_twt), N = n())
}
pollocks <- list()
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollocks[[i]] <- pollock %>%
filter(Year == i) %>%
group_by(Prey_Name) %>%
summarize(TotalWt = sum(Prey_twt), N = n())
}
View(poll_i)
View(pollocks)
pollock <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701)
test <- function(.data) {
group_by(Prey_name) %>%
summarise(TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
View(pollock)
test <- function(.data) {
.data %>%
group_by(Prey_name) %>%
summarise(TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
library(dplyr) # v0.7.5
library(rlang) # v0.2.1
library(purrr)
test <- function(.data) {
.data %>%
group_by(Prey_name) %>%
summarise(TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
test <- function(.data) {
group_by(.data, Prey_name) %>%
summarise(.data, TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
test <- function(.data) {
group_by(.data, Prey_Name) %>%
summarise(.data, TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
test <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n())
}
pollock %>%
test()
PW_PN <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
pollock %>%
test()
pollock %>%
PW_PN()
PW_PN <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), Year = Year) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
pollock %>%
PW_PN()
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701) %>%
PW_PN()
View(pollock_1999)
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701)
pollock_1999 %>%
PW_PN()
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
PW_PN <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n()) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100)
}
pollock_1999 %>%
PW_PN()
pollock_1999 %>%
PW_PN()
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701) %>%
PW_PN()
View(pollock_1999)
PW_PN <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701) %>%
PW_PN()
View(pollock_1999)
PW_PN_PF <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701) %>%
PW_PN_PF()
#I started off trying to write a function for %W  %N and %F
pollock <- raw_stomach_contents %>%
filter(Pred_nodc == 8791030701)
{pollock_processed[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF()
}
pollock_processed <- tibble()
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{pollock_processed[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF()
}
{pollock %>%
filter(Year == i) %>%
PW_PN_PF()
}
{pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
{pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
.data %>%
group_by(Year) %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
PW_PN_PF <- function(.data) {
.data %>%
group_by(Year, Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
PW_PN_PF()
PW_PN_PF <- function(.data) {
.data %>%
group_by(Year) %>%
group_by(Prey_Name)
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
PW_PN_PF()
PW_PN_PF <- function(.data) {
.data %>%
group_by(Year) %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
PW_PN_PF()
View(pollock_1999)
.data %>%
group_by(Year) %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1), Year = Year) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
PW_PN_PF <- function(.data) {
.data %>%
group_by(Year) %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1), Year = Year) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
PW_PN_PF()
PW_PN_PF <- function(.data) {
.data %>%
group_by(Year) %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1), Year = unique(Year)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
PW_PN_PF()
PW_PN_PF <- function(.data) {
.data %>%
group_by(Prey_Name) %>%
summarise(TotalWt = sum(Prey_twt), N = n(), F = sum(unique(Pred_specn)*0+1)) %>%
mutate("%W" = (TotalWt/(sum(TotalWt))*100), "%N" = (N/sum(N))*100, "%F" = (F/540)*100)
}
#One option is to now use this function filtering for each year, but that involves a lot of copying and pasting
pollock_1999 <- raw_stomach_contents %>%
filter(Year == 1999, Pred_nodc == 8791030701) %>%
PW_PN_PF()
{
print(i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
print(i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock_processed <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
View(pollock_processed)
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock_processed[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock_processed[[as.numeric(i)]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
i <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
[i] <- pollock %>%
for(i in unique(pollock$Year))
{
i <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
View(i)
unique(pollock$Year)
for(i in unique(pollock$Year))
{
i <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in unique(pollock$Year))
{
year[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in unique(pollock$Year))
{
pollock[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in unique(pollock$Year))
{
pollock_processed[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
pollock_processed <- data_frame()
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock_processed[[i]] <- pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i)
}
for(i in c(1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019))
{
pollock %>%
filter(Year == i) %>%
PW_PN_PF() %>%
mutate(Year = i) %>%
print()
}
